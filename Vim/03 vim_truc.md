# Vim 技巧

## 文档中移动

### 常见查找

- 光标位置与当前行行尾之间，查找指定的字符：`f{char}`, `;`, `,`
- 正向移动到下一个 `{char}` 所在之处的前一个字符：`t{char}`
- 反向移动到下一个 `{char}` 所在之处的后一个字符：`T{char}`
- 查找：`/{word}`（开动作，找到的字符在操作之外）
    - 配合命令：`d/ge<CR>`, `v/ge<CR>hd`

### 文本对象

**文本对象**
- 命令两个字符组成，第一个是 `i` (inside) 或 `a` (around, all)；例如：
```
a), a}, a], a>, a', a", a`, at
i), i}, i], i>, i', i", i`, it
一对圆括号，一对花括号等
t:  XML 标签
```
应用：`citclick here<Esc>` 

### 文本块
**文本块**：单词、句子和段落

**字串**

``` 
iw, iW, is, ip, aw, aW, as, ap
单词，字串，句子，段落
```

### 位置标记
```
`m{a-zA-Z}` 设定当前光标的位置。
mm + `m 常用
```
- 命令：
```
`{a-zA-Z} 跳转回设定位置
`` 上次跳转前的位置（`m + `` = 原地）
`^ 上次插入的位置
`[, `] 上次修改或复制的起始或结束位置
`<, `> 上次高亮选区的起始或结束位置
```

## 复制与粘贴

- 操作：
	- `p` 粘贴到光标之后；`P` 粘贴到光标之前
	- 调换光标之后的两个字符：`xp` 
	- 调换当前行和他的下一行：`ddp` 


### 寄存器
- **寄存器**：`{register}` 前缀指定，若不指明，缺省使用无名寄存器
```
"ayiw 当前单词复制至寄存器 a
"bp 粘贴自寄存器 b
```

寄存器类型：
- `"_` 黑洞寄存器，有去无回
- `"0` 复制专用寄存器
- `"p"` 系统寄存器

### 寄存器替换、插入
- 在可视模式下使用 `p` 命令， Vim 将使用指定的寄存器内容替换高亮选区中的文本

- 在插入模式下，经常出现 `p` 和 `P` 混淆问题：
	- `<C-r>0` 或 `<C-r>"` 插入寄存器内容

## 重复之前的修改

- 小规模的修改：**点范式** `.`

### 宏
#### 录制宏
-  把命令序列录制为宏
	- 开始录制：`q{register}`，指定寄存器
	- 停止录制：`q`
		```
		qa 开始录制入寄存器 a
		------内容------
		0f.
		r)
		w~
		j 移动至下一个位置
		------内容------
		q 停止录制
		```
- 打印宏的内容：`:reg {register}`
- 重复调用的宏：`@{register}`
- 重复上一次宏：`@@`

- 录制注意事项：
	- 规范光标的起始位置 `n`, `0`, `gg`
	- 用可重复的动作命令直达目标，或查找
	- 当动作命令失败时，宏将中止运行

```
------内容------
{start}
f+
s + <Esc> (s=xi)
------内容------
qq;.q 常用的命令，先找到下一个匹配的字符（;），再重复上一次的命令
```

#### 追加宏

例如 `qa...q` 录制完之后，输入 `qA` 在末尾添加命令

### 串行、并行
- **串行**：`3@a`
- **并行**：先选区 + `:'<,'>normal @a`
	```
	jVG
	:'<,'>normal @a
	```
 

